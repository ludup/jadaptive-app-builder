<!DOCTYPE html>
<html lang="en" xmlns:jad="https://jadaptive.com/jadaptive">
<body>
<div class="wrapper">
<header jad:id="header"></header>
<main class="container my-auto">
   <div class="row justify-content-center">
       <div class="col-md-8">
           <div class="card">
               <div class="card-header"><span jad:bundle="default" jad:i18n="setPassword.text">Set Password</span> <div class="float-end"><a id="returnTo" href="/app/ui/search/users"><i class="far fa-window-close"></i></a></div></div>
               <div class="card-body">
               	<div id="feedback"></div>
                   <form id="loginForm" action="/app/ui/set-password/${page.uuid}" method="POST" autocomplete="off">
                       <div class="row mb-3">
                           <label for="password" class="col-md-4 form-label text-end" jad:bundle="default" jad:i18n="password.text">Password</label>
                           <div class="col-md-6">
                               <input type="password" id="password" class="form-control" name="password" autocomplete="new-password" required autofocus>
                           </div>
                       </div>

                       <div class="row mb-3">
                           <label for="confirmPassword" class="col-md-4 form-label text-end" jad:bundle="default" jad:i18n="confirmPassword.text">Confirm Password</label>
                           <div class="col-md-6">
                               <input type="password" id="confirmPassword" class="form-control" name="confirmPassword" autocomplete="new-password" required>
                           </div>
                       </div>
                       
                        <div class="row mb-3">
                           <label for="confirmPassword" class="col-md-4 form-label text-end">&nbsp;</label>
                           <div class="col-md-6">
                               <input type="checkbox" id="forceChange" name="forceChange" value="true">&nbsp;<label jad:bundle="default" jad:i18n="forceChange.text"></label>
                           </div>
                       </div>

						<div class="row">
	                       <div class="col-md-6 offset-md-4">
	                           <button id="loginSubmit" class="bg-dark btn btn-primary">
	                               <i class="fa fa-key"></i>&nbsp;<span jad:bundle="default" jad:i18n="setPassword.text">Set Password</span>
	                           </button>
	                       </div>
                       </div>
                     </form>
               </div>
              
           </div>
       </div>
   </div>
</main>
</div>
<footer jad:id="footer"></footer>
<script type="text/javascript">
	$(document).ready(function(e) {
		$('#loginSubmit').click(function(e) {
			e.preventDefault();
			$('#feedback').empty();
			if($('#confirmPassword').val() !== $('#password').val()) {
				
           	   $('#feedback').prepend('<p id="feedback" class="alert alert-danger col-12"><i class="far fa-exclamation-square"></i> <span id="feedbackText"></span></p>');
               $('#feedbackText').text("Passwords do not match!");
               
			} else {
			
				JadaptiveUtils.startAwesomeSpin($('#loginSubmit i'), 'fa-key');
				$('#loginForm').submit();
			}
		});
	});
</script>
</body>
</html>